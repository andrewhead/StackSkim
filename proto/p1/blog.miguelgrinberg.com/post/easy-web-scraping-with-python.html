<!DOCTYPE html>
<html>
  <head>
    
    <title>
    
        Easy Web Scraping with Python - miguelgrinberg.com
    
</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="miguelgrinberg.com">
	<meta name="copyright" content="Copyright (c) 2012-2015 Miguel Grinberg">
	<meta name="author" content="Miguel Grinberg">
    
    <meta name="keywords" content="python, programming, scraping, beatifulsoup, requests, multiprocessing, pool">
    

    
    <!-- Bootstrap -->
    <link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../static/prettify.css" type="text/css" rel="stylesheet" />
    <link href="../static/colorbox/colorbox.css" rel="stylesheet" type="text/css" />
    <link href="../static/style.css" rel="stylesheet" type="text/css" />

    <link rel="shortcut icon" href="../static/favicon.ico">
	<link rel="alternate" type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed" title="miguelgrinberg.com RSS feed">

  </head>
  <body>
    
    <!-- facebook sdk -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <!-- google plus sdk -->
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    <!-- twitter sdk -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <!-- linkedin sdk -->
    <script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>

    
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="http://blog.miguelgrinberg.com/index">Home</a></li>
                        <li><a href="http://blog.miguelgrinberg.com/post/about-me">About Me</a></li>
                        <li><a href="http://blog.miguelgrinberg.com/post/about-this-blog">About This Blog</a></li>
                        
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <p class="navbar-text" style="margin-top: 10px; margin-bottom: 0px;">
                                <a type="application/rss+xml" href="http://blog.miguelgrinberg.com/feed"><img src="../static/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
                                <a href="https://www.facebook.com/miguelgrinbergblog"><img src="../static/facebook.png" alt="Facebook" title="Facebook" /></a>
                                <a href="https://plus.google.com/u/0/117786742456929977820"><img src="../static/googleplus.png" alt="Google+" title="Google+" /></a>
                                <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../static/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
                                <a href="http://github.com/miguelgrinberg"><img src="../static/github.png" alt="GitHub" title="GitHub" /></a>
                                <a href="https://twitter.com/#!/miguelgrinberg"><img src="../static/twitter.png" alt="Twitter" title="Twitter" /></a>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
    </nav>

    
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-md-push-9 sidebar-bg">
                <div id="sidebar">
                    

                    
                    <h1>Flask Web Development</h1>
                    <p>If you want to learn modern web development techniques with Python and Flask, you may find my O'Reilly book useful:</p>
                    <p><center><a href="http://bit.ly/flaskbook"><img style="border: 1px solid black;" src="../static/flask-book-cover-tiny.png"></a></center></p>
                    <p>Visit <a href="http://flaskbook.com">http://flaskbook.com</a> for information about this and other Flask training products I have created!</p>
                    

                    <h1>About Miguel</h1>
                    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../static/miguel.jpg" />
                    <p>Welcome to my blog!</p>
                    <p>I'm a software engineer, photographer and filmmaker in Portland, Oregon, USA.</p>
                    <p>You can also find me on <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a>, <a href="https://plus.google.com/u/0/117786742456929977820">Google+</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://github.com/miguelgrinberg">Github</a> and <a href="https://twitter.com/#!/miguelgrinberg">Twitter</a>.</p>
                    <p>Thank you for visiting!</p>

                    

                    
                    <h1>Categories</h1>
<ul>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Arduino/feed">
			<img src="../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Arduino">Arduino</a></span> (7)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Authentication/feed">
			<img src="../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Authentication">Authentication</a></span> (4)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Blog/feed">
			<img src="../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Blog">Blog</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/C++/feed">
			<img src="../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/C++">C++</a></span> (5)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Cloud/feed">
			<img src="../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Cloud">Cloud</a></span> (2)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Filmmaking/feed">
			<img src="../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Filmmaking">Filmmaking</a></span> (6)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Flask/feed">
			<img src="../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Flask">Flask</a></span> (36)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Games/feed">
			<img src="../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Games">Games</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Gear/feed">
			<img src="../static/rss-small.png" title="Gear RSS Feed" label="Gear RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Gear">Gear</a></span> (6)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/HTML5/feed">
			<img src="../static/rss-small.png" title="HTML5 RSS Feed" label="HTML5 RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/HTML5">HTML5</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Heroku/feed">
			<img src="../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Heroku">Heroku</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Javascript/feed">
			<img src="../static/rss-small.png" title="Javascript RSS Feed" label="Javascript RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Javascript">Javascript</a></span> (3)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Movie&#32;Reviews/feed">
			<img src="../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Movie&#32;Reviews">Movie Reviews</a></span> (5)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Netflix/feed">
			<img src="../static/rss-small.png" title="Netflix RSS Feed" label="Netflix RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Netflix">Netflix</a></span> (5)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Node.js/feed">
			<img src="../static/rss-small.png" title="Node.js RSS Feed" label="Node.js RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Node.js">Node.js</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/OpenStack/feed">
			<img src="../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/OpenStack">OpenStack</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Personal/feed">
			<img src="../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Personal">Personal</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Photography/feed">
			<img src="../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Photography">Photography</a></span> (6)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Product&#32;Reviews/feed">
			<img src="../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Product&#32;Reviews">Product Reviews</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Programming/feed">
			<img src="../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span> (44)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Project&#32;Management/feed">
			<img src="../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Project&#32;Management">Project Management</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Python/feed">
			<img src="../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span> (39)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/REST/feed">
			<img src="../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/REST">REST</a></span> (4)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Rackspace/feed">
			<img src="../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Rackspace">Rackspace</a></span> (1)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Raspberry&#32;Pi/feed">
			<img src="../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Raspberry&#32;Pi">Raspberry Pi</a></span> (6)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/RhinoSteady/feed">
			<img src="../static/rss-small.png" title="RhinoSteady RSS Feed" label="RhinoSteady RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/RhinoSteady">RhinoSteady</a></span> (6)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Robotics/feed">
			<img src="../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Robotics">Robotics</a></span> (6)
	</li>

	<li>
		<a href="http://blog.miguelgrinberg.com/category/Video/feed">
			<img src="../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" />
		</a>
		<span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Video">Video</a></span> (4)
	</li>

</ul>
                    
                </div>
            </div>
            <div class="col-md-8 col-md-pull-4">
                <div id="main">
                    
                    
                    
                    
                    

<div class="post">

<p class="date"><span class="flask-moment" data-timestamp="2014-04-21T07:00:03Z" data-format="format('LL')" data-refresh="0">2014-04-21T07:00:03Z</span></p>
<h1 class="post-title"><a href="easy-web-scraping-with-python">Easy Web Scraping with Python</a></h1>
<div class="posted">Posted by <span class="label label-danger"><a href="http://blog.miguelgrinberg.com/author/Miguel&#32;Grinberg">Miguel Grinberg</a></span> under <span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Programming">Programming</a></span>, <span class="label label-primary"><a href="http://blog.miguelgrinberg.com/category/Python">Python</a></span>. </div>
<div class="social-bar">
    <table>
        <tr>
            <td><div class="social-box" style="padding-top: 8px;"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div></td>
            <td><div class="social-box" style="padding-left: 6px;"><div class="fb-like" data-href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"></div></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><g:plusone href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" size="tall"></g:plusone></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" data-counter="top"></script></div></td>
        </tr>
    </table>
</div>
<div class="post_body"><p>A little over a year ago I wrote an article on <a href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-nodejs">web scraping using Node.js</a>. Today I'm revisiting the topic, but this time I'm going to use Python, so that the techniques offered by these two languages can be compared and contrasted.</p>
<h2>The Problem</h2>
<p>As I'm sure you know, I attended PyCon in Montréal earlier this month. The video recordings of all the talks and tutorials have already been released on YouTube, with an index available at <a href="http://pyvideo.org/category/50/pycon-us-2014">pyvideo.org</a>.</p>
<p>I thought it would be useful to know what are the most watched videos of the conference, so we are going to write a scraping script that will obtain the list of available videos from pyvideo.org and then get viewer statistics from each of the videos directly from their YouTube page. Sounds interesting? Let's get started!</p>
<h2>The Tools</h2>
<p>There are two basic tasks that are used to scrape web sites:</p>
<ol>
<li>Load a web page to a string.</li>
<li>Parse HTML from a web page to locate the interesting bits.</li>
</ol>
<p>Python offers two excellent tools for the above tasks. I will use the awesome <a href="http://docs.python-requests.org/en/latest/">requests</a> to load web pages, and <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a> to do the parsing.</p>
<p>We can put these two packages in a virtual environment:</p>
<pre><code>$ mkdir pycon-scraper
$ virtualenv venv
$ source venv/bin/activate
(venv) $ pip install requests beautifulsoup4
</code></pre>
<p>If you are using Microsoft Windows, note that the virtual environment activation command above is different, you should use <code>venv\Scripts\activate</code>.</p>
<h2>Basic Scraping Technique</h2>
<p>The first thing to do when writing a scraping script is to manually inspect the page(s) to scrape to determine how the data can be located.</p>
<p>To begin with, we are going to look at the list of PyCon videos at <a href="http://pyvideo.org/category/50/pycon-us-2014">http://pyvideo.org/category/50/pycon-us-2014</a>. Inspecting the HTML source of this page we find that the structure of the video list is more or less as follows:</p>
<pre><code>&lt;div id="video-summary-content"&gt;
    &lt;div class="video-summary"&gt;    &lt;!-- first video --&gt;
        &lt;div class="thumbnail-data"&gt;...&lt;/div&gt;
        &lt;div class="video-summary-data"&gt;
            &lt;div&gt;
                &lt;strong&gt;&lt;a href="#link to video page#"&gt;#title#&lt;/a&gt;&lt;/strong&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="video-summary"&gt;    &lt;!-- second video --&gt;
        ...
    &lt;/div&gt;
    ...
&lt;/div&gt;
</code></pre>
<p>So the first task is to load this page, and extract the links to the individual pages, since the links to the YouTube videos are in these pages.</p>
<p>Loading a web page using requests is extremely simple:</p>
<pre><code>import requests
response = requests.get('http://pyvideo.org/category/50/pycon-us-2014')
</code></pre>
<p>That's it! After this function returns the HTML of the page is available in <code>response.text</code>.</p>
<p>The next task is to extract the links to the individual video pages. With BeautifulSoup this can be done using <a href="http://www.w3schools.com/cssref/css_selectors.asp">CSS selector</a> syntax, which you may be familiar if you work on the client-side.</p>
<p>To obtain the links we will use a selector that captures the <code>&lt;a&gt;</code> elements inside each <code>&lt;div&gt;</code> with class  <code>video-summary-data</code>. Since there are several <code>&lt;a&gt;</code> elements for each video we will filter them to include only those that point to a URL that begins with <code>/video</code>, which is unique to the individual video pages. The CSS selector that implements the above criteria is <code>div.video-summary-data a[href^=/video]</code>. The following snippet of code uses this selector with BeautifulSoup to obtain the <code>&lt;a&gt;</code> elements that point to video pages:</p>
<pre><code>import bs4
soup = bs4.BeautifulSoup(response.text)
links = soup.select('div.video-summary-data a[href^=/video]')
</code></pre>
<p>Since we are really interested in the link itself and not in the <code>&lt;a&gt;</code> element that contains it, we can improve the above with a list comprehension:</p>
<pre><code>links = [a.attrs.get('href') for a in soup.select('div.video-summary-data a[href^=/video]')]
</code></pre>
<p>And now we have a list of all the links to the individual pages for each session!</p>
<p>The following script shows a cleaned up version of all the techniques we have learned so far:</p>
<pre><code>import requests
import bs4

root_url = 'http://pyvideo.org'
index_url = root_url + '/category/50/pycon-us-2014'

def get_video_page_urls():
    response = requests.get(index_url)
    soup = bs4.BeautifulSoup(response.text)
    return [a.attrs.get('href') for a in soup.select('div.video-summary-data a[href^=/video]')]

print(get_video_page_urls())
</code></pre>
<p>If you run the above script you will get a long list of URLs as a result. Now we need to parse each of these to get more information about each PyCon session.</p>
<h2>Scraping Linked Pages</h2>
<p>The next step is to load each of the pages in our URL list. If you want to see how these pages look, here is an example: <a href="http://pyvideo.org/video/2668/writing-restful-web-services-with-flask">http://pyvideo.org/video/2668/writing-restful-web-services-with-flask</a>. Yes, that's me, that is one of my sessions!</p>
<p>From these pages we can scrape the session title, which appears at the top. We can also obtain the names of the speakers and the YouTube link from the sidebar that appears on the right side below the embedded video. The code that gets these elements is shown below:</p>
<pre><code>def get_video_data(video_page_url):
    video_data = {}
    response = requests.get(root_url + video_page_url)
    soup = bs4.BeautifulSoup(response.text)
    video_data['title'] = soup.select('div#videobox h3')[0].get_text()
    video_data['speakers'] = [a.get_text() for a in soup.select('div#sidebar a[href^=/speaker]')]
    video_data['youtube_url'] = soup.select('div#sidebar a[href^=http://www.youtube.com]')[0].get_text()
</code></pre>
<p>A few things to note about this function:</p>
<ul>
<li>The URLs returned from the scraping of the index page are relative, so the <code>root_url</code> needs to be prepended.</li>
<li>The session title is obtained from the <code>&lt;h3&gt;</code> element inside the <code>&lt;div&gt;</code> with id <code>videobox</code>. Note that <code>[0]</code> is needed because the <code>select()</code> call returns a list, even if there is only one match.</li>
<li>The speaker names and YouTube links are obtained in a similar way to the links in the index page.</li>
</ul>
<p>Now all that remains is to scrape the views count from the YouTube page for each video. This is actually very simple to write as a continuation of the above function. In fact, it is so simple that while we are at it, we can also scrape the likes and dislikes counts:</p>
<pre><code>def get_video_data(video_page_url):
    # ...
    response = requests.get(video_data['youtube_url'])
    soup = bs4.BeautifulSoup(response.text)
    video_data['views'] = int(re.sub('[^0-9]', '',
                                     soup.select('.watch-view-count')[0].get_text().split()[0]))
    video_data['likes'] = int(re.sub('[^0-9]', '',
                                     soup.select('.likes-count')[0].get_text().split()[0]))
    video_data['dislikes'] = int(re.sub('[^0-9]', '', 
                                        soup.select('.dislikes-count')[0].get_text().split()[0]))
    return video_data
</code></pre>
<p>The <code>soup.select()</code> calls above capture the stats for the video using selectors for the specific id names used in the YouTube page. But the text of the elements need to be processed a bit before it can be converted to a number. Consider an example views count, which YouTube would show as <code>"1,344 views"</code>. To remove the text after the number the contents are split at whitespace and only the first part is used. This first part is then filtered with a regular expression that removes any characters that are not digits, since the numbers can have commas in them. The resulting string is finally converted to an integer and stored.</p>
<p>To complete the scraping the following function invokes all the previously shown code:</p>
<pre><code>def show_video_stats():
    video_page_urls = get_video_page_urls()
    for video_page_url in video_page_urls:
        print get_video_data(video_page_url)
</code></pre>
<h2>Parallel Processing</h2>
<p>The script up to this point works great, but with over a hundred videos it can take a while to run. In reality we aren't doing so much work, what takes most of the time is to download all those pages, and during that time the script is blocked. It would be much more efficient if the script could run several of these download operations simultaneously, right?</p>
<p>Back when I wrote the scraping article using Node.js the parallelism came for free with the asynchronous nature of JavaScript. With Python this can be done as well, but it needs to be specified explicitly. For this example I'm going to start a pool of eight worker processes that can work concurrently. This is surprisingly simple:</p>
<pre><code>from multiprocessing import Pool

def show_video_stats(options):
    pool = Pool(8)
    video_page_urls = get_video_page_urls()
    results = pool.map(get_video_data, video_page_urls)
</code></pre>
<p>The <code>multiprocessing.Pool</code> class starts eight worker processes that wait to be given jobs to run. Why eight? It's twice the number of cores I have on my computer. While experimenting with different sizes for the pool I've found this to be the sweet spot. Less than eight make the script run slower, more than eight do not make it go faster. </p>
<p>The <code>pool.map()</code> call is similar to the regular <code>map()</code> call in that it invokes the function given as the first argument once for each of the elements in the iterable given as the second argument. The big difference is that it sends all these to run by the processes owned by the pool, so in this example eight tasks will run concurrently.</p>
<p>The time savings are considerable. On my computer the first version of the script completes in 75 seconds, while the pool version does the same work in 16 seconds!</p>
<h2>The Complete Scraping Script</h2>
<p>The final version of my scraping script does a few more things after the data has been obtained.</p>
<p>I've added a <code>--sort</code> command line option to specify a sorting criteria, which can be by views, likes or dislikes. The script will sort the list of results in descending order by the specified field. Another option, <code>--max</code> takes a number of results to show, in case you just want to see a few entries from the top. Finally, I have added a <code>--csv</code> option which prints the data in CSV format instead of table aligned, to make it easy to export the data to a spreadsheet.</p>
<p>The complete script is available for download at this location: <a href="https://gist.github.com/miguelgrinberg/5f52ceb565264b1e969a">https://gist.github.com/miguelgrinberg/5f52ceb565264b1e969a</a>.</p>
<p>Below is an example output with the 25 most viewed sessions at the time I'm writing this:</p>
<pre>
(venv) $ python pycon-scraper.py --sort views --max 25 --workers 8
Views  +1  -1 Title (Speakers)
 3002  27   0 Keynote - Guido Van Rossum (Guido Van Rossum)
 2564  21   0 Computer science fundamentals for self-taught programmers (Justin Abrahms)
 2369  17   0 Ansible - Python-Powered Radically Simple IT Automation (Michael Dehaan)
 2165  27   6 Analyzing Rap Lyrics with Python (Julie Lavoie)
 2158  24   3 Exploring Machine Learning with Scikit-learn (Jake Vanderplas, Olivier Grisel)
 2065  13   0 Fast Python, Slow Python (Alex Gaynor)
 2024  24   0 Getting Started with Django, a crash course (Kenneth Love)
 1986  47   0 It's Dangerous to Go Alone: Battling the Invisible Monsters in Tech (Julie Pagano)
 1843  24   0 Discovering Python (David Beazley)
 1672  22   0 All Your Ducks In A Row: Data Structures in the Standard Library and Beyond
 1558  17   1 Keynote - Fernando Pérez (Fernando Pérez)
 1449   6   0 Descriptors and Metaclasses - Understanding and Using Python's More Advanced Features
 1402  12   0 Flask by Example (Miguel Grinberg)
 1342   6   0 Python Epiphanies (Stuart Williams)
 1219   5   0 0 to 00111100 with web2py (G. Clifford Williams)
 1169  18   0 Cheap Helicopters In My Living Room (Ned Jackson Lovely)
 1146  11   0 IPython in depth: high productivity interactive and parallel python (Fernando Perez)
 1127   5   0 2D/3D graphics with Python on mobile platforms (Niko Skrypnik)
 1081   8   0 Generators: The Final Frontier (David Beazley)
 1067  12   0 Designing Poetic APIs (Erik Rose)
 1064   6   0 Keynote - John Perry Barlow (John Perry Barlow)
 1029  10   0 What Is Async, How Does It Work, And When Should I Use It? (A. Jesse Jiryu Davis)
  981  11   0 The Sorry State of SSL (Hynek Schlawack)
  961  12   2 Farewell and Welcome Home: Python in Two Genders (Naomi Ceder)
  958   6   0 Getting Started Testing (Ned Batchelder)
</pre>

<h2>Conclusion</h2>
<p>I hope you have found this article useful as an introduction to web scraping with Python. I have been pleasantly surprised with the use of Python, the tools are robust and powerful, and the fact that the asynchronous optimizations can be left for the end is great compared to JavaScript, where there is no way to avoid working asynchronously from the start.</p>
<p>Miguel</p></div>
<div class="social-bar">
    <table>
        <tr>
            <td><div class="social-box" style="padding-top: 8px;"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div></td>
            <td><div class="social-box" style="padding-left: 6px;"><div class="fb-like" data-href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"></div></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><g:plusone href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" size="tall"></g:plusone></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python" data-counter="top"></script></div></td>
        </tr>
    </table>
</div>


<h4 style="text-align: right"><a name="comments"></a>40 comments</h4>


<div class="comment">
    <ul>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/d0aa94b6b25657acb0b659ad74f38b96?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#1</span> <span class="label label-primary"><a href="http://aguegu.net">Weihong Guan</a></span> said
                    <span class="flask-moment" data-timestamp="2014-04-22T00:33:58Z" data-format="fromNow(0)" data-refresh="0">2014-04-22T00:33:58Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great job. I have been working with your blog for a few month. Look forwards to the publication of your new book. </p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/c5338220f660fdebc7abe88c28a65ca4?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#2</span> <span class="label label-primary"><a href="http://blog.miguelgrinberg.com/post/www.technifar.com">Fraser Gorrie</a></span> said
                    <span class="flask-moment" data-timestamp="2014-04-22T16:16:47Z" data-format="fromNow(0)" data-refresh="0">2014-04-22T16:16:47Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great article, Miguel!

A question: in you flask tutorial series, you opted to not use activate with virtualenv. Have you reconsidered, or is that a flask accommodation?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#3</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-04-22T16:37:37Z" data-format="fromNow(0)" data-refresh="0">2014-04-22T16:37:37Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Fraser: Yes, I have softened my views on activated virtualenvs since I wrote that first mega-tutorial article. Even for Flask, these days I&#39;m using more the activate/deactivate scripts.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/a562b9f78517a51a392019ffe13900e1?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#4</span> <span class="label label-primary">Sheila</span> said
                    <span class="flask-moment" data-timestamp="2014-04-24T18:33:27Z" data-format="fromNow(0)" data-refresh="0">2014-04-24T18:33:27Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">This is neat -- I was wondering if you would like to use the json call to pyvideo to get a list of videos, and if so, would you like to request enhancements for what to include? It wouldn&#39;t be a good example of scraping, but maybe you could do another post about learning to call apis?

yours,
a maintainer of pyvideo :)</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#5</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-04-24T18:45:50Z" data-format="fromNow(0)" data-refresh="0">2014-04-24T18:45:50Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Sheila: I was already alerted of the fact that there is JSON info for videos by your colleague Will. I will add an appendix at the end of this article showing how to optimize my script using this data and only scraping the youtube pages. Thanks! </p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/1a1736908e5d886e3a1ff8bb77e1330c?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#6</span> <span class="label label-primary"><a href="http://www.nullonerror.org">Rodrigo Delduca</a></span> said
                    <span class="flask-moment" data-timestamp="2014-04-28T16:06:15Z" data-format="fromNow(0)" data-refresh="0">2014-04-28T16:06:15Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Did you hear about the Scrapy[1]?

1 - http://scrapy.org</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/fa0922bb62dd6c6a249fcdb416a00ab7?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#7</span> <span class="label label-primary">Martin Betz</span> said
                    <span class="flask-moment" data-timestamp="2014-06-03T16:21:27Z" data-format="fromNow(0)" data-refresh="0">2014-06-03T16:21:27Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Thanks for this tutorial. Of course we all know Scrapy, but for a case like this one with limited complexity, Scrapy seems to be a bit of an overkill. BeautifulSoup appears more appropriate!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/7f85c0a839f920b04eea05fce148310b?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#8</span> <span class="label label-primary">Meysam</span> said
                    <span class="flask-moment" data-timestamp="2014-06-28T07:52:50Z" data-format="fromNow(0)" data-refresh="0">2014-06-28T07:52:50Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hello Miguel, Thanks for this great tutorial.
I just run your script and get this error:
Traceback (most recent call last):
  File &#34;pycon-scraper.py&#34;, line 67, in &lt;module&gt;
    show_video_stats(parse_args())
  File &#34;pycon-scraper.py&#34;, line 47, in show_video_stats
    results = sorted(pool.map(get_video_data, video_page_urls), key=lambda video: video[options.sort],
  File &#34;/usr/lib/python2.7/multiprocessing/pool.py&#34;, line 250, in map
    return self.map_async(func, iterable, chunksize).get()
  File &#34;/usr/lib/python2.7/multiprocessing/pool.py&#34;, line 554, in get
    raise self._value
IndexError: list index out of range

what is the problem?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#9</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-07-02T18:28:21Z" data-format="fromNow(0)" data-refresh="0">2014-07-02T18:28:21Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Meysam: this highlights one of the problems with web scraping, which is that scripts break when the web sites change their pages. I have an updated version of the script here: https://gist.github.com/miguelgrinberg/5f52ceb565264b1e969a</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/a675fc534c2aa7cbb8b4092b60099db9?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#10</span> <span class="label label-primary">jeffrey</span> said
                    <span class="flask-moment" data-timestamp="2014-07-09T06:44:42Z" data-format="fromNow(0)" data-refresh="0">2014-07-09T06:44:42Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Good tutorial so far, the one bit that doesn&#39;t make sense to me yet is this:
&#34;video_data[&#39;views&#39;] = int(re.sub(&#39;[^0-9]&#39;, &#39;&#39;,
                                     soup.select(&#39;.watch-view-count&#39;)[0].get_text().split()[0]))&#34;

&#34;This first part is then filtered with a regular expression that removes any characters that are not digits, since the numbers can have commas in them.&#34;

From reading about this function re.sub, it basically does a find and replace? So wouldn&#39;t it find all strings that start with 0-9 and replace with an empty string? I thought you would need to search for commas, and replace them with &#39;&#39;. Can you elaborate?
</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/ad702423795b27f13d3c605ce0d570e7?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#11</span> <span class="label label-primary">Tao</span> said
                    <span class="flask-moment" data-timestamp="2014-07-09T11:17:56Z" data-format="fromNow(0)" data-refresh="0">2014-07-09T11:17:56Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">I tried to use the same code you uploaded here, they work fine with the static website, I just wonder if there is any way to retrieve the content from a dynamic web site, for example website using ajax? Thanks</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#12</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-07-10T04:00:21Z" data-format="fromNow(0)" data-refresh="0">2014-07-10T04:00:21Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@jeffrey: the regular expression finds anything that is NOT a digit. The ^ before 0-9 inverts the selection criteria.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#13</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-07-10T04:00:52Z" data-format="fromNow(0)" data-refresh="0">2014-07-10T04:00:52Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Tao: for a website that runs Javascript code you need to use a more elaborated client. Try Selenium.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/8355bed41f580ce4b5abd9780fdbc895?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#14</span> <span class="label label-primary">johnnycakes79</span> said
                    <span class="flask-moment" data-timestamp="2014-07-14T00:15:24Z" data-format="fromNow(0)" data-refresh="0">2014-07-14T00:15:24Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great Tutorial. Thanks. It nicely covers 2 things I&#39;ve been hacking away at this weekend... well 3 in fact - downloading SciPy 2014 videos (automagically), scraping websites and parallel python... I&#39;ve grabbed your Gist, merged it with my own massaged fork of Nick Facano&#39;s pytube and voila... it works - kinda! thanks again: https://github.com/johnnycakes79/pyvideo_scraper</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/251a85bdcde40d2ac46823d625df7972?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#15</span> <span class="label label-primary">David</span> said
                    <span class="flask-moment" data-timestamp="2014-07-15T12:33:22Z" data-format="fromNow(0)" data-refresh="0">2014-07-15T12:33:22Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">My new home for the next few months :)</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/b908457d5ac6a3332c9081950538a56f?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#16</span> <span class="label label-primary">David</span> said
                    <span class="flask-moment" data-timestamp="2014-07-31T03:36:13Z" data-format="fromNow(0)" data-refresh="0">2014-07-31T03:36:13Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great article.  So what is your opinion of Python vs. Node.js specific to scaping?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#17</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-08-02T04:57:42Z" data-format="fromNow(0)" data-refresh="0">2014-08-02T04:57:42Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@David: I prefer to make things asynchronous explicitly in Python to have the asynchronous behavior forced on me by Node. And I don&#39;t mind I don&#39;t like asynchronous code, for some things it&#39;s great, but for this type of work not so much in my opinion.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/371cd33496226ac3babe236510f1f143?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#18</span> <span class="label label-primary"><a href="http://www.webdata-scraping.com">Web Scraping</a></span> said
                    <span class="flask-moment" data-timestamp="2014-08-02T09:11:04Z" data-format="fromNow(0)" data-refresh="0">2014-08-02T09:11:04Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Selenium is also good for scraping....great thing is it is web based application to use for scraping.....</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/d6094a52b8977c2cc9d72103565e4fdb?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#19</span> <span class="label label-primary">Fara</span> said
                    <span class="flask-moment" data-timestamp="2014-08-07T10:02:10Z" data-format="fromNow(0)" data-refresh="0">2014-08-07T10:02:10Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">How to click on link in python and moving to next page</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#20</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-08-08T14:50:01Z" data-format="fromNow(0)" data-refresh="0">2014-08-08T14:50:01Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Fara: the concept of clicking a link does not exist when you are using scraping tools like the ones I present in this article. The equivalent would be to find the link that you are interested in, and then send a request to that link. I do that several times in the example presented above.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/87832bd0164cb75b4d84ef869dd5d4c5?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#21</span> <span class="label label-primary">Alfredo Conetta</span> said
                    <span class="flask-moment" data-timestamp="2014-08-25T22:10:31Z" data-format="fromNow(0)" data-refresh="0">2014-08-25T22:10:31Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Just starting an MSc thesis in GIS and think that this web scrapping could be used to enable extraction of geographic context from news stories. The above info was interesting and seams to be quite straightforward. </p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/474b89066f4456bcaa7343074979c048?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#22</span> <span class="label label-primary">Rd Hilman Hermarian</span> said
                    <span class="flask-moment" data-timestamp="2014-11-10T17:59:42Z" data-format="fromNow(0)" data-refresh="0">2014-11-10T17:59:42Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">I found this article very helpful. Thanks Miguel.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/e51d98064cf3f3de2c87e2953b653fbc?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#23</span> <span class="label label-primary">Xiaobo</span> said
                    <span class="flask-moment" data-timestamp="2014-11-10T21:21:17Z" data-format="fromNow(0)" data-refresh="0">2014-11-10T21:21:17Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">This is cool! I wonder if you ever encounter website with CAPTCHA, and were you able to scrape that?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/1bf0b890099f33342888b9268a8a4bbd?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#24</span> <span class="label label-primary">Anubhav Aggarwal</span> said
                    <span class="flask-moment" data-timestamp="2014-11-11T07:52:01Z" data-format="fromNow(0)" data-refresh="0">2014-11-11T07:52:01Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi,
I am relatively new to python, but I have a coding background and I understand the logic. I am unable to find documentation on &#34;soup.select&#34;. My problem is that the tag that has the href attribute that I want also defines a class. Not able to access the attribute.
&lt;div class=&#34;company&#34;&gt;
                                            &lt;a class=&#34;cd dot-company&#34; target=&#34;_blank&#34; href=&#34;http://qiin.en.alibaba.com/contactinfo.html&#34; rel=&#34;nofollow&#34; data-domdot=&#34;id:2634,sid:200947260&#34; data-dot=&#34;c_pid=200947260&amp;c_type=info&amp;cid=2634&#34;&gt;&lt;span class=&#34;ico-tcd&#34;&gt;&lt;/span&gt;Contact Details&lt;/a&gt;
                                                                                
                &lt;/div&gt;
</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="http://gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35?s=60&d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#25</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2014-11-11T19:41:06Z" data-format="fromNow(0)" data-refresh="0">2014-11-11T19:41:06Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Xiaobo: A website that presents a CAPTCHA is expecting humans, not robots. Trying to circumvent the CAPTCHA prompt is possible, but it is hard, unethical, and not worth the trouble in my opinion.</p>
                </div>
            </div>
        </li>
        
    </ul>
</div>

<div class="page">
<ul class="pager">
  <li class="previous disabled">
    <a href="easy-web-scraping-with-python#">&laquo;&laquo;</a>
  </li>
  <li class="previous disabled">
    <a href="easy-web-scraping-with-python#">&laquo;</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python/page/0#comments">&raquo;&raquo;</a>
  </li>
  <li class="next">
    <a href="http://blog.miguelgrinberg.com/post/easy-web-scraping-with-python/page/2#comments">&raquo;</a>
  </li>
</ul>
</div>

<h3><a name="commentform"></a>Leave a Comment</h3>

<form action="easy-web-scraping-with-python#commentform" method="post"
  class="form" role="form">
  <div style="display:none;"><input id="csrf_token" name="csrf_token" type="hidden" value="1425757259.17##8e4ff8866fb6b85fca5e72404467dce7dd01e2ef"></div>
  
    
    






<div class="form-group "><label class="control-label" for="name">Name</label>
        <input class="form-control" id="name" name="name" required type="text" value="">
  </div>


    




<div class="form-group "><label class="control-label" for="url">URL</label>
        <input class="form-control" id="url" name="url" type="text" value="">
  </div>


    






<div class="form-group "><label class="control-label" for="email">Email</label>
        <input class="form-control" id="email" name="email" required type="text" value="">
  </div>


    






<div class="form-group "><label class="control-label" for="comment">Comment</label>
        <textarea class="form-control" id="comment" name="comment" required></textarea>
  </div>


    




<div class="form-group "><label class="control-label" for="captcha">Captcha</label>
        
<script type="text/javascript">var RecaptchaOptions = {"custom_translations": {"audio_challenge": "Get an audio challenge", "cant_hear_this": "Download sound as MP3", "help_btn": "Help", "image_alt_text": "reCAPTCHA challenge image", "incorrect_try_again": "Incorrect. Try again.", "instructions_audio": "Type what you hear", "instructions_visual": "Type the text", "play_again": "Play sound again", "privacy_and_terms": "Privacy & Terms", "refresh_btn": "Get a new challenge", "visual_challenge": "Get a visual challenge"}, "theme": "white"};</script>
<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></script>
<noscript>
  <iframe src="http://www.google.com/recaptcha/api/noscript?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S" height="300" width="500" frameborder="0"></iframe><br>
  <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge">
</noscript>

  </div>


    





  


    <input class="btn btn-default" id="submit" name="submit" type="submit" value="Submit">
  





</form>


</div>

                </div>
            </div>
        </div>
        <div id="footer">
            <p class="elapsed">This page was generated in None seconds.</p>
            <p>&copy; 2014 by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
        </div>
    </div>


    
    
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.4.33/jquery.colorbox-min.js"></script>
    <script type="text/javascript" src="../static/prettify.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment-with-langs.min.js"></script>
<script>
function flask_moment_render(elem) {
    $(elem).text(eval('moment("' + $(elem).data('timestamp') + '").' + $(elem).data('format') + ';'));
    $(elem).removeClass('flask-moment');
}
function flask_moment_render_all() {
    $('.flask-moment').each(function() {
        flask_moment_render(this);
        if ($(this).data('refresh')) {
            (function(elem, interval) { setInterval(function() { flask_moment_render(elem) }, interval); })(this, $(this).data('refresh'));
        }
    })
}
$(document).ready(function() {
    flask_moment_render_all();
});
</script>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4777284-15']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
    <script type="text/javascript">
        $(document).ready(function(){
            $(".gallery").colorbox({rel:".gallery",maxWidth:"95%",maxHeight:"95%",scalePhotos:true});
            // add prettyprint class to all <pre><code></code></pre> blocks
            var prettify = false;
            $("pre code").parent().each(function() {
                $(this).addClass('prettyprint');
                prettify = true;
            });
            prettyPrint();
        });
    </script>


  </body>
</html>
